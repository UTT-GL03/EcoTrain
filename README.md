# R√©duction de l'impact environnemental des plateformes de r√©servation de trains

## Choix du sujet
On utilise presque tous le site ou l‚Äôapplication de la SNCF pour regarder un horaire ou acheter un billet. C‚Äôest devenu un r√©flexe du quotidien, un service que beaucoup consid√®rent comme indispensable, surtout quand on sait que 122 millions de voyageurs ont pris le TGV en 2023. On parle souvent du train comme d‚Äôun moyen de transport √©cologique, mais on oublie que tout commence en ligne. 
Est-ce que l‚Äôoutil num√©rique qu‚Äôon utilise pour voyager est vraiment aussi ¬´ vert ¬ª qu‚Äôon le pense ? 
M√™me si tout para√Æt immat√©riel, chaque clic consomme de l‚Äô√©nergie. Notre objectif est donc simple : mesurer l‚Äôimpact environnemental de l‚Äôapplication web de la SNCF, pour voir si la face num√©rique du train est aussi propre que ses rails.
  
## Utilit√© sociale
### Des transports longue distance
Les transports longue distance, comme ceux propos√©s par la SNCF, sont bien plus qu‚Äôun simple moyen de se d√©placer : ils contribuent directement √† une mobilit√© plus durable et accessible pour tous.

**Acc√®s √† l‚Äôemploi** : par exemple, un habitant de Romilly peut travailler √† Troyes ou m√™me √† Paris gr√¢ce aux liaisons ferroviaires r√©guli√®res. Sans ces trajets, certaines carri√®res seraient tout simplement impossibles.

**Acc√®s aux services publics** : sant√©, √©ducation, administration‚Ä¶ tout devient plus atteignable, m√™me quand on vit loin des grandes villes.

**Lien entre les territoires** : le train connecte des r√©gions parfois isol√©es, cr√©ant un sentiment d‚Äôappartenance nationale.

**Outil de d√©centralisation** : il rend moins n√©cessaire de vivre dans les grandes m√©tropoles pour avoir les m√™mes opportunit√©s.

### Des applications (SNCF Connect)
Les applications ne sont pas n√©cessaires √† l'emploi des solutions de transport. En revanche, elles contribuent fortement √† la simplification des d√©marches :
- Planification simplifi√©e
- Visibilit√© des offres de r√©duction
- Acc√®s aux informations (horaires)
- Achat des billets
- Meilleure compr√©hension et gain de temps

Ces applications permettent de favoriser l'acc√®s √† l'information. Dans le cas de SNCF connect par exemple, c'est √©galement un parcours utilisateur qui a enti√®rement √©t√© repens√© ces derni√®res ann√©es pour le simplifier, et am√©liorer l'aisance d'utilisation.

En somme, les applications permettent une plus forte fr√©quentation des services, gr√¢ce √† la facilitation des d√©marches li√©es aux d√©placements longue distance

## Effets de la num√©risation
Les applications num√©riques de la SNCF remplacent en partie les billets papier achet√©s au guichet ainsi que les informations affich√©es en gare. Ces alternatives ¬´ physiques ¬ª existent toujours, mais elles sont d√©sormais utilis√©es en solution de secours, plut√¥t qu‚Äôen premier r√©flexe.

Par exemple, de nombreuses gares ont r√©duit leurs horaires d‚Äôouverture ou ferm√© certains guichets, obligeant les usagers √† passer par l‚Äôapplication ou les bornes automatiques. Dans certaines petites gares, il n‚Äôy a m√™me plus aucun personnel sur place : sans smartphone ou connexion Internet, acheter un billet devient un v√©ritable parcours du combattant.

## Sc√©narios d'usage et impacts
Nous imaginons deux sc√©narios d'utilisation des applications de r√©servation de trains : l'achat d'un billet de train et la consultation de son billet. D'autres sc√©narios peuvent √™tre envisag√©s, comme la consultation des horaires, mais ce sc√©nario ressemble fortement au sc√©nario de r√©servation de billet.

### Sc√©nario 1 : "Achat d'un billet de train"
1. L'utilisateur renseigne ses gares de d√©part et de destination, ainsi que la date du voyage.
2. Ensuite, il s√©lectionne le voyage de son choix parmi ceux propos√©s.
3. Puis il s√©lectionne les options de son voyage (seconde ou premi√®re classe, option v√©lo, si√®ge)
4. Enfin, il valide le voyage et passe au paiement

### Sc√©nario 2 : "Consultation de billets de train"
1. L'utilisateur se connecte √† son espace.
2. Il s√©lectionne le voyage √† venir concern√©.
3. Il acc√®de au billet, et peut par exemple le t√©l√©charger.


## Impact de l'ex√©cution du sc√©nario aupr√®s de diff√©rents services concurrents
L'EcoIndex d'une page (de A √† G) est calcul√© (sources : EcoIndex, Octo, GreenIT) en fonction du positionnement de cette page parmi les pages mondiales concernant :
- le nombre de requ√™tes lanc√©es,
- le poids des t√©l√©chargements,
- le nombre d'√©l√©ments du document.

Nous avons choisi de comparer l'impact des sc√©narios sur les plateformes de r√©servation de train de divers pays, appartenant √† des compagnies ou non (SNCF Connect, Deutsche Bahn, 1.2.Train, Omio, Eurostar)

|Service|Score (sur 100)|Classe|D√©tail des mesures|
|---|---|---|---|
|SNCF Connect| 23  | F üî¥  | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/SNCF%20Connect/declaration-environnementale.md)  |
|DB| 32 | E üü† | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Deutsche%20Bahn/declaration-environnementale.md)  | 
|1.2.Train|82|  A üîµ | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/1.2.Train/declaration-environnementale.md)  | 
|Omio| 40  | D üü°  | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Omio/declaration-environnementale.md)  | 
|Eurostar| 15  | F üî¥ | [...](https://github.com/UTT-GL03/EcoTrain/blob/main/benchmark/Eurostar/declaration-environnementale.md)  | 

Tab.1 : Mesure de l'EcoIndex moyen de divers services de r√©servation de trains.

Les mesures de l'impact moyen de ces services (cf. Tab.1) r√©v√®lent des classes EcoIndex tr√®s faibles pour la plupart (D √† F). Seule la solution 1.2.Train, ind√©pendante des compagnies, se d√©marque avec un score √©lev√© (A). Cela peut s'expliquer par la structure tr√®s simple du site.

## Mod√®le √©conomique
Comme nous l'avons vu dans la section pr√©c√©dente, parmi les choix de conception ayant le plus d'impact environnemental, la plupart sont directement li√©s au mod√®le √©conomique du service. C'est pourquoi il est n√©cessaire √† ce stade d'analyser leur mod√®le √©conomique et de d√©finir notre propre mod√®le permettant une conception plus frugale.

|Service|Source de revenus|
|---|---|
|SNCF Connect|Vente de billets|
|DB|Vente de billets|
|1.2.Train|Commissions|
|Omio|Commissions|
|Eurostar|Vente de billets|

Tab. 2 : Offre des services de r√©servation de billets de train.

Notre march√© semble √™tre structur√© en oligop√¥le : il y a plusieurs offreurs pour acheter le m√™me billet de train. Le billet vendu est le m√™me sur les diff√©rentes plateformes mais ces plateformes ne sont pas enti√®rement identiques : fluidit√©, interface, exp√©rience utilisateur. Les services de r√©servation sont substituables entre eux : si l'on ne souhaite pas acheter son billet de train sur SNCF Connect, on peut l'acheter sur 1.2.Train ou sur Omio.

1.2.Train dispose d'un mod√®le √©conomique fragile qu'il serait pertinent de renforcer, mais le site web est d√©j√† suffisamment sobre pour que l'on ne se penche pas sur ce cas dans le cadre de notre projet. Nous trvavaillerons donc sur SNCF Connect. Il n'y a pas de publicit√© sur la plateforme, qui semble uniquement se financer gr√¢ce aux revenus des ventes de billets de train (service annexe). Nous voyons donc peu d'autres mod√®les √©conomiques pertinents, sachant que celui-ci semble largement viable.

|Source possible de revenus|Montant unitaire|Quantit√© n√©cessaire pour financer un salaire[^1]|
|---|---|---|
|Part sur les ventes de billets[^2]|0,90‚Ç¨|3966|

[^1]: Bas√© sur le co√ªt total employeur du salaire m√©dian 2025 soit 3569‚Ç¨ environ (source : [URSSAF](https://mon-entreprise.urssaf.fr/simulateurs/salaire-brut-net))
[^2]: Estimation sur la base de 2% des billets d√©di√©e √† la plateforme, les billets √©tant √† 45‚Ç¨ en moyenne

## Maquette de l'interface et √©chantillon de donn√©es
Au vu des diff√©rents services compar√©s, des exigences environnementales exprim√©es plus haut et des sc√©narios retenus, nous avons d√©fini pour notre prototype une maquette de l'interface et un √©chantillon de donn√©es r√©alistes.

Les ressources Web poss√©dant une repr√©sentation sur notre application seront de deux types :
- Les r√©sultats de recherche de voyage (avec une HTTP-URI ayant pour chemin /?depart={gare_depart}&arrivee={gare_arrivee}&date={date})
- Un voyage propos√© (avec une HTTP-URI ayant pour chemin /{id})
  
<img src="./docs/mockup_search.JPG" alt="maquette de la page de recherche" height="500"/>   <img src="./docs/mockup_tripdetails.JPG" alt="maquette de la page de r√©sultats" height="500"/>


Fig.1: Maquette de la page de recherche // Fig.2: Maquette de la page de r√©sultats de recherche

Dans un objectif de sobri√©t√© environnementale, les r√©sultats de recherche se limiterons √† ceux du jour s√©lectionn√©.

Pour des raisons de respect des droits d'auteurs, nous utilisons des donn√©es g√©n√©r√©es (avec [dummy-json](https://dummyjson.com/)). Bien que fictives, ces donn√©es correspondent √† la structure des services concurrents : les voyages comportent une gare de d√©part et d'arriv√©e, une date, une heure de d√©part et d'arriv√©e, et un ou plusieurs tarifs.

## Prototype n¬∞1 : Fonctionnalit√©s pour le sc√©nario prioritaire avec donn√©es charg√©es de mani√®re statique
Pour cette premi√®re version du prototype :
- l'√©chantillon de donn√©es est encore charg√© dans le code de mani√®re statique,
- les fonctionnalit√©s impl√©ment√©es ne sont que celles n√©cessaires pour suivre le sc√©nario prioritaire ("Acheter un billet de train").

Ce sc√©nario n√©cessite de pouvoir naviguer entre plusieurs pages : 
- la page de recherche de voyage, o√π il est possible de rechercher des trajets
- la page de r√©sultats, o√π s'affichent les trajets correspondant aux crit√®res

### Page de recherche de voyage
La page d'accueil renvoie un formulaire permettant de renseigner ses crit√®res de recherche de voyage.

<img src="./docs/searchpage_screenshot.png" alt="prototype de la page de recherche"/>
Fig.3: Prototype de la page de recherche de voyage

Pour l'instant, nous avons choisi un framework de mise en page minimaliste (PicoCSS). Dans la suite du projet, nous verrons si l'impact environnemental du passage √† un framework de mise en page plus puissant (comme Bootstrap) est acceptable.

Nous avons √©galement fait le choix de ne pas inclure de photographies, celles-ci n'√©tat pas n√©cessaires √† la r√©servation d'un billet de train.

Dans l'√©tat actuel du prototype, il est possible d'avoir une premi√®re id√©e de l'impact environnemental du frontend. Bien entendu, il manque encore le chargement dynamique des donn√©es, mais nous pouvons d√©j√† √©valuer l'impact de l'affichage des donn√©es et du framework (au sens large : React, PicoCSS). Cette √©valuation de l'impact (cf. Tab.4) est d√©j√† encourageante en mode "d√©veloppement" mais encore plus en mode "pr√©-production". Nous mesurons ici l'effet positif de l'adoption d'outils de d√©veloppement Web int√©grant la ["minification"](https://fr.wikipedia.org/wiki/Minification) (cf. Wikip√©dia) du code et la concat√©nation du code d'une part et des feuilles de style d'autre part.

| |EcoIndex|GES (gCO2e)|Taille du DOM|Requ√™tes|Taille de la page (ko)|
|---|---|---|---|---|---|
|Mode "d√©veloppement"|üü¢ 79|1.42|81|29|1873|
|Mode "pr√©-production"|üîµ 91|1.18|78|6|145|

Tab.4 Mesure de l'EcoIndex moyen de notre prototype, dans le cadre du sc√©nario n¬∞1

### Page de r√©sultats de recherche

La page de r√©sultats de recherche a pour HTTP-URI /trips, et affiche actuellement l'ensemble des donn√©es factices de fa√ßon statique. √Ä plus long terme, une requ√™te GET sera ajout√©e √† la suite de /trips afin d'afficher dynamiquement les r√©sultats selon les informations renseign√©es dans le formulaire de la page pr√©c√©dente.

Depuis cette page, il est possible d'acc√©der aux d√©tails de l'un des trajets afin de le r√©server, ou bien de retourner √† la page d'accueil en cliquant sur le titre de la page ("EcoTrain").

<img src="./docs/tripslist_screenshot.png" alt="prototype de la page de r√©sultats de recherche"/>
Fig.4 Prototype de la page de r√©sultats de recherche

### Page de d√©tails du trajet

Les pages des voyages ont pour HTTP-URI /trips/{id}. Dans notre jeu de donn√©es, chaque voyage dispose d'un ID unique qui est r√©employ√© dans l'URI.

De m√™me que pr√©c√©demment, nous avons tent√© d'impl√©menter cette page (cf. Fig. 4) conform√©ment √† ce que pr√©voyait la maquette.

<img src="./docs/tripdetails_screenshot.png" alt="prototype de la page de d√©tails sur le trajet s√©lectionn√©"/>
Fig.5 Prototype de la page de d√©tails sur le trajet choisi

### Page du panier

<img src="./docs/cart_screenshot.png" alt="prototype de la page du panier"/>
Fig.6 Prototype de la page du panier


### Impacts du sc√©nario prioritaire

| |EcoIndex|GES (gCO2e)|Taille du DOM|Requ√™tes|Taille de la page (ko)|
|---|---|---|---|---|---|
|1. Consulter la page de recherche de trajet |A üîµ 91|1.18|78|6|145|
|2. Consulter les trajets disponibles selon les crit√®res renseign√©s|B üü¢ 75|1.50|43|6|145|
|3. Consulter les d√©tails d'un trajet|A üîµ 94|1.12|47|6|145|
|4. Consulter son panier et ac√©der au paiement|A üîµ 94|1.13|43|6|145|

Tab.5: √âvaluation de l'impact du sc√©nario "Achat d'un billet de train" dans le prototype n¬∞1.

### √âtape de prototypage : Donn√©es statiques charg√©es de mani√®re dynamique

Pour cette nouvelle version du prototype (v1.0.1), identique du point de vue fonctionnel, les donn√©es (toujours statiques) sont d√©sormais charg√©es par le frontend √† travers le r√©seau imm√©diatement apr√®s un premier affichage √† vide. Ce comportement, plus r√©aliste, n'a pour effet qu'une requ√™te suppl√©mentaire par page affich√©e.

Concernant l'√©valuation de l'impact environnemental du sc√©nario, par rapport au tableau pr√©c√©dent (cf. Tab.2), √† l'exception du nombre de requ√™tes qui augmente l√©g√®rement, les r√©sultats sont identiques.

| |EcoIndex|GES (gCO2e)|Taille du DOM|Requ√™tes|Taille de la page (ko)|
|---|---|---|---|---|---|
|1. Consulter la page de recherche de trajet |A üîµ 91|1.18|81|6|146|
|2. Consulter les trajets disponibles selon les crit√®res renseign√©s|B üü¢ 75|1.51|501|9|146|
|3. Consulter les d√©tails d'un trajet|A üîµ 93|1.14|47|9|145|
|4. Consulter son panier et ac√©der au paiement|A üîµ 93|1.14|43|10|146|
